# Spondex - музыкальный синхронизатор Yandex Music и Spotify

## Описание

Это приложение синхронизирует любимые треки между сервисами Yandex Music и Spotify. Оно позволяет автоматически добавлять новые треки из одного сервиса в другой, удалять дубликаты и отслеживать треки, которые не удалось найти в одном из сервисов.

## Возможности

- Двусторонняя синхронизация между Yandex Music и Spotify
- Автоматическое добавление новых треков
- Удаление дубликатов в обоих сервисах
- Отслеживание ненайденных треков
- Периодическая синхронизация каждые 60 секунд

## Требования

- Python 3.7+
- pip (менеджер пакетов Python)
- Аккаунты Yandex Music и Spotify
- Токен Yandex Music
- Зарегистрированное приложение Spotify

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/anonymousmaharaj/spondex.git
cd spondex
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

3. Создайте файл `.env` в корневой директории проекта и добавьте следующие строки:
```
YANDEX_TOKEN=ваш_токен_yandex_music
SPOTIPY_CLIENT_ID=ваш_client_id_spotify
SPOTIPY_CLIENT_SECRET=ваш_client_secret_spotify
SPOTIPY_REDIRECT_URI=http://localhost:8888/callback
```

## Настройка

### Получение токена Yandex Music

1. Войдите в свой аккаунт Yandex Music в браузере.
2. Откройте инструменты разработчика (F12 в большинстве браузеров).
3. Перейдите на вкладку "Network" (Сеть).
4. Найдите любой запрос к `api.music.yandex.net`.
5. В заголовках запроса найдите `Authorization: OAuth ваш_токен`.
6. Скопируйте токен и вставьте его в файл `.env`.

### Настройка приложения Spotify

1. Перейдите на [Spotify Developer Dashboard](https://developer.spotify.com/dashboard/).
2. Создайте новое приложение.
3. Получите `Client ID` и `Client Secret`.
4. Добавьте `http://localhost:8888/callback` в список разрешенных URI для перенаправления.
5. Переименуйте `.env.example` в `.env`
5. Вставьте полученные данные в файл `.env`.

## Использование

Запустите приложение командой:
```bash
python main.py
```

Приложение будет автоматически синхронизировать треки каждые 60 секунд.


При первом запуске вам потребуется авторизоваться в Spotify. Следуйте инструкциям в консоли.

Так же рекомендуется при первом запуске установить флаг `force_full_sync` в `True`, чтобы приложение могло синхронизировать весь ваш музыкальный каталог.

Приложение будет работать в фоновом режиме, синхронизируя треки каждые 60 секунд. Для остановки нажмите Ctrl+C.

## Структура базы данных

Приложение использует SQLite базу данных `music_sync.db` со следующими таблицами:

1. `synced_tracks`: Хранит информацию о синхронизированных треках.
2. `sync_status`: Отслеживает время последней синхронизации для каждого сервиса.
3. `undiscovered_tracks`: Хранит информацию о треках, которые не удалось найти в одном из сервисов.

## Логирование

Приложение ведет лог своей работы, который выводится в консоль. Вы можете увидеть информацию о добавленных треках, удаленных дубликатах и ошибках.

## Решение проблем

1. Если возникают ошибки авторизации в Spotify, убедитесь, что вы правильно настроили приложение в Spotify Developer Dashboard и корректно указали данные в файле `.env`.

2. Если треки не синхронизируются с Yandex Music, проверьте правильность токена Yandex Music в файле `.env`.

3. Если приложение не находит некоторые треки, проверьте таблицу `undiscovered_tracks` в базе данных. Возможно, потребуется ручное добавление этих треков.

## Ограничения

- Приложение синхронизирует только любимые треки и не работает с плейлистами.
- Из-за различий в каталогах музыки Yandex Music и Spotify, некоторые треки могут быть не найдены.

## Вклад в проект

Если вы хотите внести свой вклад в проект, пожалуйста, создайте issue или отправьте pull request.

## Лицензия

Этот проект распространяется под лицензией MIT. Подробности см. в файле LICENSE.

